CREATE OR REPLACE TRIGGER sa.TRG_x_program_parameters_JT
before insert or update or delete on sa.x_program_parameters
for each row
declare
act varchar2(10);
sysdt date := sysdate;
begin
  if deleting then
    act := 'D';
  elsif updating then
     act := 'U';
  else
     act := 'I';
  end if;

  for c1 in (     select /*+ ordered rule */ s.*
            from v$session s
            where  s.audsid = userenv('sessionid') )
  loop
       insert into sa.x_program_parameters_his (
                                SID          ,
                                ACTION       ,
                                USERNAME     ,
                                OSUSER       ,
                                PROCESS      ,
                                MACHINE      ,
                                TERMINAL     ,
                                PROGRAM      ,
                                LOGON_TIME   ,
                                DT           ,
                               OLD_OBJID,
OLD_X_PROGRAM_NAME,
OLD_X_PROGRAM_DESC,
OLD_X_TYPE,
OLD_X_CSR_CHANNEL,
OLD_X_IVR_CHANNEL,
OLD_X_WEB_CHANNEL,
OLD_X_COMBINE_SELF,
OLD_X_COMBINE_OTHER,
OLD_X_START_DATE,
OLD_X_END_DATE,
OLD_X_GRP_ESN_COUNT,
OLD_X_IS_RECURRING,
OLD_X_BENEFIT_DAYS,
OLD_X_HANDSET_VALUE,
OLD_X_CARRMKT_VALUE,
OLD_X_CARRPARENT_VALUE,
OLD_X_ACH_GRACE_PERIOD,
OLD_X_ADD_PH_WINDOW,
OLD_X_MIN_UNIT_RATE_MINUTES,
OLD_X_MIN_UNIT_RATE_CENTS,
OLD_X_GRACE_PERIOD_WEBCSR,
OLD_X_DELAY_ENROLL_ACH_FLAG,
OLD_X_DE_ENROLL_CUTOFF_CODE,
OLD_X_DELIVERY_FRQ_CODE,
OLD_X_FIRST_DEL_DATE_CODE,
OLD_X_INCL_SERVICE_DAYS,
OLD_X_STACK_AT_ENROLL,
OLD_X_STACK_DUR_ENROLL,
OLD_X_VOL_DEENRO_SER_DAYS_LE,
OLD_X_DEENROLL_ADD_SER_DAYS,
OLD_X_BENEFIT_CUTOFF_CODE,
OLD_X_SER_DAYS_FLOAT_ACH,
OLD_X_SER_DAYS_FLOAT_NONACH,
OLD_X_PAYNOW_GRACE_PERIOD_ACH,
OLD_X_PAYNOW_GRACE_PERIOD_NON,
OLD_X_SALES_TAX_FLAG,
OLD_X_SALES_TAX_CHARGE_CUST,
OLD_X_ADDITIONAL_TAX1,
OLD_X_ADDITIONAL_TAX2,
OLD_X_CHARGE_FRQ_CODE,
OLD_X_BILL_CYL_SHIFT_DAYS,
OLD_X_PAYMENT_METHOD_CODE,
OLD_X_LOW_BALANCE_UNITS,
OLD_X_LOW_BALANCE_DOLLARS,
OLD_X_PROMO_INCL_MIN_AT,
OLD_X_PROMO_INCL_MIN_OP,
OLD_X_PROMO_INCL_MIN_WE,
OLD_X_INCL_DATA_UNITS,
OLD_X_INCL_DATA_DOLLORS,
OLD_X_PROMO_INCR_MIN_AT,
OLD_X_PROMO_INCR_MIN_OP,
OLD_X_PROMO_INCR_MIN_WE,
OLD_X_INCR_DATA_UNITS,
OLD_X_INCR_DATA_DOLLORS,
OLD_X_ADD_FUNDS_MIN,
OLD_X_ADD_FUNDS_MAX,
OLD_X_ADD_FUNDS_INCR,
OLD_X_PROMO_INCL_GRPMIN_AT,
OLD_X_PROMO_INCL_GRPMIN_OP,
OLD_X_PROMO_INCL_GRPMIN_WE,
OLD_X_INCL_DATA_GRPUNITS,
OLD_X_INCL_DATA_GRPDOLLORS,
OLD_X_PROMO_INCR_GRPMIN_AT,
OLD_X_PROMO_INCR_GRPMIN_OP,
OLD_X_PROMO_INCR_GRPMIN_WE,
OLD_X_INCR_DATA_GRPUNITS,
OLD_X_INCR_DATA_GRPDOLLORS,
OLD_X_ADD_GRP_FUNDS_MIN,
OLD_X_ADD_GRP_FUNDS_MAX,
OLD_X_ADD_GRP_FUNDS_INCR,
OLD_X_INCR_MINUTES_DLV_DAYS,
OLD_X_INCR_MINUTES_DLV_CYL,
OLD_X_INCR_GRP_MIN_DLV_DAYS,
OLD_X_INCR_GRP_MIN_DLV_CYL,
OLD_PROG_P2PN_ENRLFEE,
OLD_PROG_P2PN_MONFEE,
OLD_PROG_P2PN_GRPENRLFEE,
OLD_PROG_P2PN_GRPMONFEE,
OLD_PROG_PARAM2BUS_ORG,
OLD_X_PROG_CLASS,
OLD_X_E911_TAX_FLAG,
OLD_X_E911_TAX_CHARGE_CUST,
OLD_X_BILL_ENGINE_FLAG,
OLD_X_RULES_ENGINE_FLAG,
OLD_X_NOTIFY_ENGINE_FLAG,
OLD_X_OFF_CHANNEL,
OLD_X_ICS_APPLICATIONS,
OLD_X_MEMBERSHIP_VALUE,
OLD_X_PROMO_GROUP_VALUE,
OLD_X_RETAILER_VALUE,
OLD_X_SMS_RATE,
OLD_X_ILD,
OLD_X_SWEEP_AND_ADD_FLAG,
OLD_X_FREE_DIAL2SITE,
NEW_OBJID,
NEW_X_PROGRAM_NAME,
NEW_X_PROGRAM_DESC,
NEW_X_TYPE,
NEW_X_CSR_CHANNEL,
NEW_X_IVR_CHANNEL,
NEW_X_WEB_CHANNEL,
NEW_X_COMBINE_SELF,
NEW_X_COMBINE_OTHER,
NEW_X_START_DATE,
NEW_X_END_DATE,
NEW_X_GRP_ESN_COUNT,
NEW_X_IS_RECURRING,
NEW_X_BENEFIT_DAYS,
NEW_X_HANDSET_VALUE,
NEW_X_CARRMKT_VALUE,
NEW_X_CARRPARENT_VALUE,
NEW_X_ACH_GRACE_PERIOD,
NEW_X_ADD_PH_WINDOW,
NEW_X_MIN_UNIT_RATE_MINUTES,
NEW_X_MIN_UNIT_RATE_CENTS,
NEW_X_GRACE_PERIOD_WEBCSR,
NEW_X_DELAY_ENROLL_ACH_FLAG,
NEW_X_DE_ENROLL_CUTOFF_CODE,
NEW_X_DELIVERY_FRQ_CODE,
NEW_X_FIRST_DEL_DATE_CODE,
NEW_X_INCL_SERVICE_DAYS,
NEW_X_STACK_AT_ENROLL,
NEW_X_STACK_DUR_ENROLL,
NEW_X_VOL_DEENRO_SER_DAYS_LE,
NEW_X_DEENROLL_ADD_SER_DAYS,
NEW_X_BENEFIT_CUTOFF_CODE,
NEW_X_SER_DAYS_FLOAT_ACH,
NEW_X_SER_DAYS_FLOAT_NONACH,
NEW_X_PAYNOW_GRACE_PERIOD_ACH,
NEW_X_PAYNOW_GRACE_PERIOD_NON,
NEW_X_SALES_TAX_FLAG,
NEW_X_SALES_TAX_CHARGE_CUST,
NEW_X_ADDITIONAL_TAX1,
NEW_X_ADDITIONAL_TAX2,
NEW_X_CHARGE_FRQ_CODE,
NEW_X_BILL_CYL_SHIFT_DAYS,
NEW_X_PAYMENT_METHOD_CODE,
NEW_X_LOW_BALANCE_UNITS,
NEW_X_LOW_BALANCE_DOLLARS,
NEW_X_PROMO_INCL_MIN_AT,
NEW_X_PROMO_INCL_MIN_OP,
NEW_X_PROMO_INCL_MIN_WE,
NEW_X_INCL_DATA_UNITS,
NEW_X_INCL_DATA_DOLLORS,
NEW_X_PROMO_INCR_MIN_AT,
NEW_X_PROMO_INCR_MIN_OP,
NEW_X_PROMO_INCR_MIN_WE,
NEW_X_INCR_DATA_UNITS,
NEW_X_INCR_DATA_DOLLORS,
NEW_X_ADD_FUNDS_MIN,
NEW_X_ADD_FUNDS_MAX,
NEW_X_ADD_FUNDS_INCR,
NEW_X_PROMO_INCL_GRPMIN_AT,
NEW_X_PROMO_INCL_GRPMIN_OP,
NEW_X_PROMO_INCL_GRPMIN_WE,
NEW_X_INCL_DATA_GRPUNITS,
NEW_X_INCL_DATA_GRPDOLLORS,
NEW_X_PROMO_INCR_GRPMIN_AT,
NEW_X_PROMO_INCR_GRPMIN_OP,
NEW_X_PROMO_INCR_GRPMIN_WE,
NEW_X_INCR_DATA_GRPUNITS,
NEW_X_INCR_DATA_GRPDOLLORS,
NEW_X_ADD_GRP_FUNDS_MIN,
NEW_X_ADD_GRP_FUNDS_MAX,
NEW_X_ADD_GRP_FUNDS_INCR,
NEW_X_INCR_MINUTES_DLV_DAYS,
NEW_X_INCR_MINUTES_DLV_CYL,
NEW_X_INCR_GRP_MIN_DLV_DAYS,
NEW_X_INCR_GRP_MIN_DLV_CYL,
NEW_PROG_P2PN_ENRLFEE,
NEW_PROG_P2PN_MONFEE,
NEW_PROG_P2PN_GRPENRLFEE,
NEW_PROG_P2PN_GRPMONFEE,
NEW_PROG_PARAM2BUS_ORG,
NEW_X_PROG_CLASS,
NEW_X_E911_TAX_FLAG,
NEW_X_E911_TAX_CHARGE_CUST,
NEW_X_BILL_ENGINE_FLAG,
NEW_X_RULES_ENGINE_FLAG,
NEW_X_NOTIFY_ENGINE_FLAG,
NEW_X_OFF_CHANNEL,
NEW_X_ICS_APPLICATIONS,
NEW_X_MEMBERSHIP_VALUE,
NEW_X_PROMO_GROUP_VALUE,
NEW_X_RETAILER_VALUE,
NEW_X_SMS_RATE,
NEW_X_ILD,
NEW_X_SWEEP_AND_ADD_FLAG,
NEW_X_FREE_DIAL2SITE            )
                      values ( c1.sid,
                               act,
                               c1.username,
                               c1.osuser,
                               c1.process,
                               c1.machine,
                               c1.terminal,
                               c1.program,
                               c1.logon_time,
                               sysdt,
                               :OLD.OBJID,
:OLD.X_PROGRAM_NAME,
:OLD.X_PROGRAM_DESC,
:OLD.X_TYPE,
:OLD.X_CSR_CHANNEL,
:OLD.X_IVR_CHANNEL,
:OLD.X_WEB_CHANNEL,
:OLD.X_COMBINE_SELF,
:OLD.X_COMBINE_OTHER,
:OLD.X_START_DATE,
:OLD.X_END_DATE,
:OLD.X_GRP_ESN_COUNT,
:OLD.X_IS_RECURRING,
:OLD.X_BENEFIT_DAYS,
:OLD.X_HANDSET_VALUE,
:OLD.X_CARRMKT_VALUE,
:OLD.X_CARRPARENT_VALUE,
:OLD.X_ACH_GRACE_PERIOD,
:OLD.X_ADD_PH_WINDOW,
:OLD.X_MIN_UNIT_RATE_MINUTES,
:OLD.X_MIN_UNIT_RATE_CENTS,
:OLD.X_GRACE_PERIOD_WEBCSR,
:OLD.X_DELAY_ENROLL_ACH_FLAG,
:OLD.X_DE_ENROLL_CUTOFF_CODE,
:OLD.X_DELIVERY_FRQ_CODE,
:OLD.X_FIRST_DELIVERY_DATE_CODE,
:OLD.X_INCL_SERVICE_DAYS,
:OLD.X_STACK_AT_ENROLL,
:OLD.X_STACK_DUR_ENROLL,
:OLD.X_VOL_DEENRO_SER_DAYS_LESS,
:OLD.X_DEENROLL_ADD_SER_DAYS,
:OLD.X_BENEFIT_CUTOFF_CODE,
:OLD.X_SER_DAYS_FLOAT_ACH,
:OLD.X_SER_DAYS_FLOAT_NONACH,
:OLD.X_PAYNOW_GRACE_PERIOD_ACH,
:OLD.X_PAYNOW_GRACE_PERIOD_NON,
:OLD.X_SALES_TAX_FLAG,
:OLD.X_SALES_TAX_CHARGE_CUST,
:OLD.X_ADDITIONAL_TAX1,
:OLD.X_ADDITIONAL_TAX2,
:OLD.X_CHARGE_FRQ_CODE,
:OLD.X_BILL_CYL_SHIFT_DAYS,
:OLD.X_PAYMENT_METHOD_CODE,
:OLD.X_LOW_BALANCE_UNITS,
:OLD.X_LOW_BALANCE_DOLLARS,
:OLD.X_PROMO_INCL_MIN_AT,
:OLD.X_PROMO_INCL_MIN_OP,
:OLD.X_PROMO_INCL_MIN_WE,
:OLD.X_INCL_DATA_UNITS,
:OLD.X_INCL_DATA_DOLLORS,
:OLD.X_PROMO_INCR_MIN_AT,
:OLD.X_PROMO_INCR_MIN_OP,
:OLD.X_PROMO_INCR_MIN_WE,
:OLD.X_INCR_DATA_UNITS,
:OLD.X_INCR_DATA_DOLLORS,
:OLD.X_ADD_FUNDS_MIN,
:OLD.X_ADD_FUNDS_MAX,
:OLD.X_ADD_FUNDS_INCR,
:OLD.X_PROMO_INCL_GRPMIN_AT,
:OLD.X_PROMO_INCL_GRPMIN_OP,
:OLD.X_PROMO_INCL_GRPMIN_WE,
:OLD.X_INCL_DATA_GRPUNITS,
:OLD.X_INCL_DATA_GRPDOLLORS,
:OLD.X_PROMO_INCR_GRPMIN_AT,
:OLD.X_PROMO_INCR_GRPMIN_OP,
:OLD.X_PROMO_INCR_GRPMIN_WE,
:OLD.X_INCR_DATA_GRPUNITS,
:OLD.X_INCR_DATA_GRPDOLLORS,
:OLD.X_ADD_GRP_FUNDS_MIN,
:OLD.X_ADD_GRP_FUNDS_MAX,
:OLD.X_ADD_GRP_FUNDS_INCR,
:OLD.X_INCR_GRP_MINUTES_DLV_DAYS,
:OLD.X_INCR_MINUTES_DLV_CYL,
:OLD.X_INCR_GRP_MINUTES_DLV_DAYS,
:OLD.X_INCR_GRP_MINUTES_DLV_CYL     ,
:OLD.PROG_PARAM2PRTNUM_ENRLFEE,
:OLD.PROG_PARAM2PRTNUM_MONFEE,
:OLD.PROG_PARAM2PRTNUM_GRPENRLFEE,
:OLD.PROG_PARAM2PRTNUM_GRPMONFEE,
:OLD.PROG_PARAM2BUS_ORG,
:OLD.X_PROG_CLASS,
:OLD.X_E911_TAX_FLAG,
:OLD.X_E911_TAX_CHARGE_CUST,
:OLD.X_BILL_ENGINE_FLAG,
:OLD.X_RULES_ENGINE_FLAG,
:OLD.X_NOTIFY_ENGINE_FLAG,
:OLD.X_OFF_CHANNEL,
:OLD.X_ICS_APPLICATIONS,
:OLD.X_MEMBERSHIP_VALUE,
:OLD.X_PROMO_GROUP_VALUE,
:OLD.X_RETAILER_VALUE,
:OLD.X_SMS_RATE,
:OLD.X_ILD,
:OLD.X_SWEEP_AND_ADD_FLAG,
:OLD.X_FREE_DIAL2SITE,
:NEW.OBJID,
:NEW.X_PROGRAM_NAME,
:NEW.X_PROGRAM_DESC,
:NEW.X_TYPE,
:NEW.X_CSR_CHANNEL,
:NEW.X_IVR_CHANNEL,
:NEW.X_WEB_CHANNEL,
:NEW.X_COMBINE_SELF,
:NEW.X_COMBINE_OTHER,
:NEW.X_START_DATE,
:NEW.X_END_DATE,
:NEW.X_GRP_ESN_COUNT,
:NEW.X_IS_RECURRING,
:NEW.X_BENEFIT_DAYS,
:NEW.X_HANDSET_VALUE,
:NEW.X_CARRMKT_VALUE,
:NEW.X_CARRPARENT_VALUE,
:NEW.X_ACH_GRACE_PERIOD,
:NEW.X_ADD_PH_WINDOW,
:NEW.X_MIN_UNIT_RATE_MINUTES,
:NEW.X_MIN_UNIT_RATE_CENTS,
:NEW.X_GRACE_PERIOD_WEBCSR,
:NEW.X_DELAY_ENROLL_ACH_FLAG,
:NEW.X_DE_ENROLL_CUTOFF_CODE,
:NEW.X_DELIVERY_FRQ_CODE,
:NEW.X_FIRST_DELIVERY_DATE_CODE,
:NEW.X_INCL_SERVICE_DAYS,
:NEW.X_STACK_AT_ENROLL,
:NEW.X_STACK_DUR_ENROLL,
:NEW.X_VOL_DEENRO_SER_DAYS_LESS,
:NEW.X_DEENROLL_ADD_SER_DAYS,
:NEW.X_BENEFIT_CUTOFF_CODE,
:NEW.X_SER_DAYS_FLOAT_ACH,
:NEW.X_SER_DAYS_FLOAT_NONACH,
:NEW.X_PAYNOW_GRACE_PERIOD_ACH,
:NEW.X_PAYNOW_GRACE_PERIOD_NON,
:NEW.X_SALES_TAX_FLAG,
:NEW.X_SALES_TAX_CHARGE_CUST,
:NEW.X_ADDITIONAL_TAX1,
:NEW.X_ADDITIONAL_TAX2,
:NEW.X_CHARGE_FRQ_CODE,
:NEW.X_BILL_CYL_SHIFT_DAYS,
:NEW.X_PAYMENT_METHOD_CODE,
:NEW.X_LOW_BALANCE_UNITS,
:NEW.X_LOW_BALANCE_DOLLARS,
:NEW.X_PROMO_INCL_MIN_AT,
:NEW.X_PROMO_INCL_MIN_OP,
:NEW.X_PROMO_INCL_MIN_WE,
:NEW.X_INCL_DATA_UNITS,
:NEW.X_INCL_DATA_DOLLORS,
:NEW.X_PROMO_INCR_MIN_AT,
:NEW.X_PROMO_INCR_MIN_OP,
:NEW.X_PROMO_INCR_MIN_WE,
:NEW.X_INCR_DATA_UNITS,
:NEW.X_INCR_DATA_DOLLORS,
:NEW.X_ADD_FUNDS_MIN,
:NEW.X_ADD_FUNDS_MAX,
:NEW.X_ADD_FUNDS_INCR,
:NEW.X_PROMO_INCL_GRPMIN_AT,
:NEW.X_PROMO_INCL_GRPMIN_OP,
:NEW.X_PROMO_INCL_GRPMIN_WE,
:NEW.X_INCL_DATA_GRPUNITS,
:NEW.X_INCL_DATA_GRPDOLLORS,
:NEW.X_PROMO_INCR_GRPMIN_AT,
:NEW.X_PROMO_INCR_GRPMIN_OP,
:NEW.X_PROMO_INCR_GRPMIN_WE,
:NEW.X_INCR_DATA_GRPUNITS,
:NEW.X_INCR_DATA_GRPDOLLORS,
:NEW.X_ADD_GRP_FUNDS_MIN,
:NEW.X_ADD_GRP_FUNDS_MAX,
:NEW.X_ADD_GRP_FUNDS_INCR,
:NEW.X_INCR_MINUTES_DLV_DAYS,
:NEW.X_INCR_MINUTES_DLV_CYL,
:NEW.X_INCR_GRP_MINUTES_DLV_DAYS,
:NEW.X_INCR_GRP_MINUTES_DLV_CYL     ,
:NEW.PROG_PARAM2PRTNUM_ENRLFEE,
:NEW.PROG_PARAM2PRTNUM_MONFEE,
:NEW.PROG_PARAM2PRTNUM_GRPENRLFEE,
:NEW.PROG_PARAM2PRTNUM_GRPMONFEE,
:NEW.PROG_PARAM2BUS_ORG,
:NEW.X_PROG_CLASS,
:NEW.X_E911_TAX_FLAG,
:NEW.X_E911_TAX_CHARGE_CUST,
:NEW.X_BILL_ENGINE_FLAG,
:NEW.X_RULES_ENGINE_FLAG,
:NEW.X_NOTIFY_ENGINE_FLAG,
:NEW.X_OFF_CHANNEL,
:NEW.X_ICS_APPLICATIONS,
:NEW.X_MEMBERSHIP_VALUE,
:NEW.X_PROMO_GROUP_VALUE,
:NEW.X_RETAILER_VALUE,
:NEW.X_SMS_RATE,
:NEW.X_ILD,
:NEW.X_SWEEP_AND_ADD_FLAG,
:NEW.X_FREE_DIAL2SITE  );
  end loop;
end;
/